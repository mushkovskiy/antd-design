# Dashboard Component

> **Цель**: Контроль выполнения текущих ремонтов.

---

## Общая информация

**Название компонента**: Dashboard  
**Стек**: React + Ant Design  
**Источник тестовых данных**: `data-example.json`

---

## Структура компонента

Компонент состоит из двух блоков:

1. **Блок фильтрации** (логика фильтрации пока не требуется).
2. **Таблица** (`<Table />` из Ant Design).

---

## 1) Блок фильтрации (UI без логики)

Использовать компоненты Ant Design:

### Поле поиска
- **Компонент**: `Input`
- **Placeholder**: `Введите адрес или номер заявки`

### Выбор года
- **Компонент**: `Select` (Dropdown)
- **Опции**: текущий год и следующий год (например, 2026 и 2027)

### Выбор квартала
- **Компонент**: `Select` (Dropdown)
- **Опции**: `Q1`, `Q2`, `Q3`, `Q4`

### Выбор заказчика
- **Компонент**: `Select` (Dropdown)
- **Опции**: моковые (label/value), например:
  - `{ label: "ВСП", value: "vsp" }`
  - `{ label: "VIP ВСП", value: "vip_vsp" }`
  - `{ label: "ЦУНДО / КИЦ", value: "cundo_kic" }`
  - `{ label: "АЗ", value: "az" }`
  - `{ label: "Блок Т.", value: "block_t" }`

---

## 2) Таблица

Использовать `<Table />` из Ant Design.

### Колонки верхнего уровня
1. **Территория**
2. **Планирование ремонта**

---

## Описание структуры таблицы

### Колонка "Территория"
Колонка должна иметь кастомный заголовок: помимо текста **"Территория"**, добавить текст:  
`потребности в шт., бюджет в рублях без НДС`


### Колонка "Планирование ремонта"
Колонка имеет многоуровневый заголовок:

- Главный заголовок: **Планирование ремонта**
- Подколонки: **Потребность**, **Стоимость**, **Бюджет**, **Отклонение**

Требование по UI: убрать видимое разделение (разделительные границы) между дочерними колонками внутри группы.

---

## Структура данных и ключи

Данные строк имеют древовидную структуру.

В данных встречаются ключи:
- `aptrBudgetGosbs` — список ГОСБов (подразделений).
- `aptrBudgetObjects` — список объектов определенного ГОСБа / подразделения.
- `aptrProjects` — список потребностей определнного объекта.

---

## Описание тестовых данных и рендера таблицы

Тестовые данные для рендера таблицы взять из файла `data-example.json`.

### Общая модель
В исходных данных есть объект с ключом `context`, значение которого — массив объектов.  
Каждый объект из `context` — это верхнеуровневая строка (далее: **территория**).

---

## Рендер: уровень "Территория" (верхний уровень)

### Колонка "Территория"
Название строки — поле `tbId`.

### Колонка "Планирование ремонта"

#### Подколонка "Потребность"
Рассчитать количество потребностей в территории так:

- У территории есть `aptrBudgetGosbs` (массив).
- В каждом элементе `aptrBudgetGosbs` есть `aptrBudgetObjects` (массив).
- В каждом элементе `aptrBudgetObjects` есть `aptrProjects` (массив).
- Нужно посчитать суммарное количество элементов `aptrProjects` по всей структуре территории.  
Это число и будет значением для подколонки **"Потребность"**.

#### Подколонки "Стоимость" и "Бюджет" (общий визуальный компонент)
Нарисовать общий для "Стоимость" и "Бюджет" компонент, по смыслу похожий на ProgressBar.

**Верстка ProgressBar:**
- `div` высотой `30px`
- ширина `265px`
- `border-radius: 16px`

**Расчет Стоимости:**
- Стоимость = сумма `summ` по всем потребностям территории, но только для тех потребностей, где `status === "INCLUDED_AP"`.

**Расчет Бюджета:**
- Бюджет = значение `planBudget` у объекта территории.

**Отображение внутри ProgressBar:**
- В начале (слева) указать **Стоимость**
- В конце (справа) указать **Бюджет**

**Логика заполнения и цвета:**
- Если Стоимость < Бюджет:
  - заполненная часть (доля Стоимости) цвет `rgb(171, 169, 241)`
  - оставшаяся часть цвет `rgb(233, 234, 255)`
- Если Стоимость > Бюджет:
  - весь ProgressBar цвет `rgb(255, 120, 117)`
- Если Стоимость = Бюджет:
  - весь ProgressBar цвет `rgb(81, 158, 65)`
- Если нет Стоимости, то есть нет объектов у которых поле status в значении `status === "INCLUDED_AP"`
  - весь ProgressBar цвет rgb(233, 234, 255)

#### Подколонка "Отклонение"
Нужно отрисовать два значения (в одной ячейке) с `gap: 8px`:

1) Абсолютное отклонение: `Бюджет - Стоимость`  
- Если разница отрицательная — показывать отрицательное число.  
- Если разница равна 0 — вместо числа показать иконку `<CheckOutlined />`.

2) Процентное отклонение: та же разница, выраженная в процентах.

---

## Рендер: уровень "ГОСБ" (первая подстрока)

Данные подстроки брать из массива `aptrBudgetGosbs`.

### Колонка "Территория"
Значение взять из поля `gosbId`.

### Остальные колонки
Логика та же, что и для территории, но выборка ограничивается текущим ГОСБом:
- проходить по `aptrBudgetObjects` внутри текущего элемента `aptrBudgetGosbs`.

---

## Рендер: уровень "Объект" (следующая вложенность)

Каждый элемент `aptrBudgetObjects` — это подстрока текущего ГОСБа (вложенный уровень).

Логика расчета для колонок аналогична, но выборка ограничивается потребностями объекта (его `aptrProjects`).

---

## Рендер: уровень "Потребность" (последний уровень)

Рендерить потребности из `aptrProjects` (у каждого подразделения/объекта потребности свои; потребностей может не быть).

### Колонка "Территория" (в одну строку)
Потребность состоит из 4 элементов:
1) Номер потребности — поле `number`
2) Заказчик — поле `customer`
3) Квартал — поле `quarter`
4) Статус — поле `status`

Все элементы расположить в строку.

### Колонка "Планирование ремонта" (для потребности)
Для строки потребности отображать только:
- **Потребность**: всегда `1`
- **Стоимость**: значение `summ`

Подколонки **"Бюджет"** и **"Отклонение"** для уровня потребности не выводить.

---

## Итоговая строка (Итого)

Последняя строка — суммаризация значений всех полей.

### Колонка "Территория"
Текст: **Итого**

### Колонка "Планирование ремонта"
Суммировать значения по всем строкам.  
Интерфейс (ProgressBar, отклонения) должен совпадать с остальными строками.
